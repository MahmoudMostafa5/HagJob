@model FirstApplication.Models.PostVm

<head>
    <meta charset="utf-8">
    <meta content="width=device-width, initial-scale=1.0" name="viewport">

    <meta content="" name="description">
    <meta content="" name="keywords">

    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,300i,400,400i,600,600i,700,700i|Roboto:300,300i,400,400i,500,500i,600,600i,700,700i|Poppins:300,300i,400,400i,500,500i,600,600i,700,700i" rel="stylesheet">

    <!-- Vendor CSS Files -->
    <link href="~/Mention/assets/vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">
    <link href="~/Mention/assets/vendor/icofont/icofont.min.css" rel="stylesheet">
    <link href="~/Mention/assets/vendor/boxicons/css/boxicons.min.css" rel="stylesheet">
    <link href="~/Mention/assets/vendor/animate.css/animate.min.css" rel="stylesheet">
    <link href="~/Mention/assets/vendor/owl.carousel/assets/owl.carousel.min.css" rel="stylesheet">
    <link href="~/Mention/assets/vendor/venobox/venobox.css" rel="stylesheet">
    <link href="~/Mention/assets/vendor/aos/aos.css" rel="stylesheet">

    <link rel="stylesheet" type="text/css" href="~/Projectcss/Post/css/style.css">
    <link href="~/assets/css/fontawesome-all.min.css" rel="stylesheet" />

    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css">
    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js"></script>
    <!-- Template Main CSS File -->
    <link href="~/Mention/assets/css/style.css" rel="stylesheet">

</head>

<div class="container">

    <!-- Create Post -->
    <div class="row mb-3">
        <div class="col-sm-2"></div>
        <div class="col-sm-7">
            <h2>Create new Post</h2>
            <input placeholder="What do you think, Mahmoud?" class="form-control mb-2">

            <!-- Button to Open the Modal -->
            <button type="button" class="btn btn-primary form-control" data-toggle="modal" data-target="#myModal">Create Post</button>

            <form asp-controller="Post" asp-action="CreatePost" asp-area="Genral" enctype="multipart/form-data">

                <!-- The Modal -->
                <div class="modal fade" id="myModal">
                    <div class="modal-dialog">
                        <div class="modal-content">

                            <!-- Modal Header -->
                            <div class="modal-header">
                                <h4 class="modal-title">Creating Post</h4>
                                <button type="button" class="close" data-dismiss="modal">&times;</button>
                            </div>

                            <!-- Modal body -->
                            <div class="modal-body">
                                @*@Html.Partial("_Create")*@

                                <textarea class="form-control" placeholder="What do you think, Mahmoud?" asp-for="Description" rows="5" id="comment"></textarea>

                                @*<input type="file" class="form-control my-1" name="image" />*@

                                <button id="button" type="button" name="button" class="btn btn-outline-info my-1" data-toggle="modal" href="#Image" onclick="thisFileUpload();"><i class="fas fa-images"></i></button>
                                <input type="file" id="file" name="image" style="display:none;" />

                                <button id="button" type="button" name="button" class="btn btn-outline-info my-1" data-toggle="modal" href="#mention"><i class="fas fa-tags"></i></button>
                                <input type="file" id="file" name="mention" style="display:none;" />

                                <button id="button" type="button" name="button" class="btn btn-outline-info my-1" data-toggle="modal" href="#feelings"><i class="fas fa-smile"></i></button>
                                <input style="display:none;" />

                            </div>

                            <!-- Modal footer -->
                            <div class="modal-footer">
                                <button type="submit" class="btn btn-success">Post</button>
                                <button type="button" class="btn btn-danger" data-dismiss="modal">Cancel Post</button>
                            </div>

                        </div>
                    </div>
                </div>

                <!-- The Feelings -->
                <div class="modal fade" id="feelings">
                    <div class="modal-dialog  modal-dialog modal-lg">
                        <div class="modal-content">

                            <!-- Modal Header -->
                            <div class="modal-header">
                                <h4 class="modal-title">Choose Your Feelings</h4>
                                <button type="button" class="close" data-dismiss="modal">&times;</button>
                            </div>

                            <!-- Modal body -->
                            <div class="modal-body">
                                <select name="FeelingId" asp-for="FeelingId" asp-items="@(new SelectList(@ViewBag.Feelings ,"Id","YourFeeling")) " class="custom-select">
                                    <option selected>Choose Your Feelings</option>
                                </select>
                            </div>

                            <!-- Modal footer -->
                            <div class="modal-footer">
                                <button type="button" data-dismiss="modal" class="btn btn-success">Choosen</button>
                                <button type="button" class="btn btn-danger" data-dismiss="modal" href="#myModal">Cancel Choosen</button>
                            </div>

                        </div>
                    </div>
                </div>

                <!-- Mentions -->
                <div class="modal fade" id="mention">
                    <div class="modal-dialog  modal-dialog-centered">
                        <div class="modal-content">

                            <!-- Modal Header -->
                            <div class="modal-header">
                                <h4 class="modal-title text-center">Mention Your Friends</h4>
                                <button type="button" class="close" data-dismiss="modal">&times;</button>
                            </div>

                            <!-- Modal body -->
                            <div class="modal-body">
                                <section id="doctors" class="doctors section-bg">
                                    <div class="container aos-init aos-animate" data-aos="fade-up">

                                        <div class="section-title">
                                            <h2>Your Friends</h2>
                                        </div>

                                        <div class="member aos-init aos-animate" data-aos="fade-up" data-aos-delay="100">
                                            <div class="member-img">
                                                <img src="~/Mention/assets/img/testimonials/testimonials-1.jpg" style="width:10%;height:10%;border-radius:50%;margin-top:5px;" class="img-fluid" alt="">
                                                <h6>Sarah Jhonson</h6>

                                            </div>
                                            <div class="member-info">
                                            </div>
                                        </div>

                                        <div class="member aos-init aos-animate" data-aos="fade-up" data-aos-delay="200">
                                            <div class="member-img">
                                                <img src="~/Mention/assets/img/testimonials/testimonials-2.jpg" style="width:10%;height:10%;border-radius:50%;margin-top:5px;" class="img-fluid" alt="">
                                            </div>
                                            <div class="member-info">
                                                <h6>Sarah Jhonson</h6>
                                            </div>
                                        </div>

                                        <div class="member aos-init aos-animate" data-aos="fade-up" data-aos-delay="300">
                                            <div class="member-img">
                                                <img src="~/Mention/assets/img/testimonials/testimonials-4.jpg" style="width:10%;height:10%;border-radius:50%;margin-top:5px;" class="img-fluid" alt="">
                                            </div>
                                            <div class="member-info">
                                                <h6>William Anderson</h6>
                                            </div>
                                        </div>

                                        <div class="member aos-init aos-animate" data-aos="fade-up" data-aos-delay="400">
                                            <div class="member-img">
                                                <img src="~/Mention/assets/img/testimonials/testimonials-3.jpg" style="width:10%;height:10%;border-radius:50%;margin-top:5px;" class="img-fluid" alt="">
                                            </div>
                                            <div class="member-info">
                                                <h6>Amanda Jepson</h6>
                                            </div>
                                        </div>


                                    </div>
                                </section>
                            </div>

                            <!-- Modal footer -->
                            <div class="modal-footer">
                                <button type="button" class="btn btn-success">Mention</button>
                                <button type="button" class="btn btn-danger" data-dismiss="modal" href="#myModal">Cancel Mention</button>
                            </div>

                        </div>
                    </div>
                </div>

            </form>

        </div>
    </div>

    <!-- All Posts -->
    <div class="row">
        <div class="col-sm-2"></div>
        <div class="col-sm-7 ">
            @foreach (var item in ViewBag.Posts)
            {
                <div class="post-block">
                    <div class="d-flex justify-content-between">
                        <div class="d-flex mb-3">
                            <div class="mr-2">
                                <a href="#!" class="text-dark"><img src="~/Projectcss/Post/img/user1.jpg" alt="User" class="author-img"></a>
                            </div>
                            <div>
                                <h5 class="mb-0"><a href="#!" class="text-dark">Kiran Acharya</a></h5>
                                <p class="mb-0 text-muted">5m</p>
                            </div>
                        </div>
                        <div class="post-block__user-options">
                            <a href="#!" id="triggerId" data-toggle="dropdown" aria-haspopup="true"
                               aria-expanded="false">
                                <i class="fa fa-ellipsis-v" aria-hidden="true"></i>
                            </a>
                            <div class="dropdown-menu dropdown-menu-right" aria-labelledby="triggerId">
                                <a class="dropdown-item text-dark editItem" asp-controller="Post" asp-action="EditPost" asp-area="Genral" asp-route-Id="@item.Id"><i class="fa fa-pencil mr-1"></i>Edit</a>
                                @*<a id="editItem" data-target="#edit" data-toggle="modal" class="dropdown-item text-dark editItem" asp-route-Id="@item.Id"><i class="fa fa-pencil mr-1"></i>Edit</a>*@
                                <a id="khkhk" data-target="#Del" data-toggle="modal" class="dropdown-item text-danger deleteItem" onclick="Delete(@item.Id)"><i class="fa fa-trash mr-1"></i>Delete</a>
                                @*<a id="deleteItem" data-target="#basic" data-toggle="modal" class="dropdown-item text-danger deleteItem" asp-route-Id="@item.Id"><i class="fa fa-trash mr-1"></i>Delete</a>*@
                            </div>
                        </div>
                    </div>
                    <div class="post-block__content mb-2">
                        <p>@item.Description</p>
                        @*<img src="~/Projectcss/Post/img/food1.jpg" class="w-100" alt="">*@
                        <form enctype="multipart/form-data">
                            <img src="~/ImageProfile/@item.Image" class="w-100" alt="">
                        </form>
                    </div>
                    <div class="mb-3">
                        <div class="d-flex justify-content-between mb-2">
                            <div class="d-flex">
                                <a href="#!" class="text-danger mr-2"><span><i class="fa fa-heart"></i></span></a>
                                <a href="#!" class="text-dark mr-2"><span>Comment</span></a>
                            </div>
                            <a href="#!" class="text-dark"><span>Share</span></a>
                        </div>
                        <p class="mb-0">Liked by <a href="#!" class="text-muted font-weight-bold">John doe</a> & <a href="#!" class="text-muted font-weight-bold">25 others</a></p>
                    </div>
                    <hr>
                    <div class="post-block__comments">
                        <!-- Comment Input -->
                        <div class="input-group mb-3">
                            <input type="text" class="form-control" placeholder="Add your comment">
                            <div class="input-group-append">
                                <button class="btn btn-primary" type="button" id="button-addon2"><i class="fa fa-paper-plane"></i></button>
                            </div>
                        </div>
                        <!-- Comment content -->
                        <div class="comment-view-box mb-3">
                            <div class="d-flex mb-2">
                                <img src="~/Projectcss/Post/img/user2.jpg" alt="User img" class="author-img author-img--small mr-2">
                                <div>
                                    <h6 class="mb-1"><a href="#!" class="text-dark">John doe</a> <small class="text-muted">1m</small></h6>
                                    <p class="mb-1">Lorem ipsum dolor sit amet, consectetur adipiscing elit.</p>
                                    <div class="d-flex">
                                        <a href="#!" class="text-dark mr-2"><span><i class="fa fa-heart-o"></i></span></a>
                                        <a href="#!" class="text-dark mr-2"><span>Reply</span></a>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!-- More Comments -->
                        <hr>
                        <a href="#!" class="text-dark">View More comments <span class="font-weight-bold">(12)</span></a>
                    </div>
                </div>
            }

        </div>
    </div>


    <!-- Edit Post -->
    <!--<form asp-controller="Post" asp-action="EditPost" asp-area="Genral" enctype="multipart/form-data">

        <div class="modal fade" id="edit" style="display: none;">
            <div class="modal-dialog modal-dialog-centered modal-lg">
                <div class="modal-content">-->
                    @*<button type="button" class="close text-muted mt-3" data-dismiss="modal" aria-hidden="true"><i class="fa fa-window-close"></i></button>*@

                    <!--<div class="modal-header">
                        <h4 class="modal-title">Edit Your Post</h4>
                        <a class="close" asp-action="Allposts" asp-controller="Post" asp-area="Genral">&times;</a>
                    </div>
                    <div class="modal-body">
                        <div class="post-block">
                            <div class="post-block mb-3">
                                <div class="mr-2">-->
                                    @*<a href="#!" class="text-dark"><img src="~/ImageProfile/@Model.Image" style="width:8%;border-radius:50%" alt="User"></a>*@
                                    <!--<h5 class="mb-0"><a href="#!" class="text-dark">Kiran Acharya</a></h5>
                                </div>
                            </div>
                            <div class="post-block__content mb-2">
                                <div class="form-group">
                                    <label>Description</label>-->
                                    @*<input type="text" class="form-control" id="exampleInputFirstName" value="@Model.Description" asp-for="Description">*@
                                <!--</div>
                                <div class="form-group">
                                    <label>Image</label>
                                    <input type="text" asp-for="Image" style="display:none" ; />
                                    <input type="file" name="Image">
                                </div>
                                <div class="form-group">
                                    <label>Your Feeling</label>
                                    <select name="FeelingId" asp-for="FeelingId" asp-items="@(new SelectList(@ViewBag.Feelings ,"Id","YourFeeling")) " class="custom-select">
                                        <option selected>Choose Your Feelings</option>
                                    </select>
                                </div>-->
                                @*<p>@Model.Description</p>*@
                                @*<img src="~/ImageProfile/@Model.Image" class="w-100" alt="">*@
                            <!--</div>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="submit" class="btn btn-success">Save Change</button>
                        <button type="submit" class="btn btn-danger" data-dismiss="modal">Cancel Edit</button>
                    </div>
                </div>
            </div>
        </div>
    </form>-->
    
    <!-- Delete Post -->
    <div id="Del" class="modal fade" tabindex="-1">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Confirm Delete This Post</h5>
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                </div>
                <div class="modal-body">
                    <p>Are You sure to Delete this Post ??</p>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
                    <a class="btn btn-danger" id="btnConfirmDelteFunction">Delete</a>
                </div>
            </div>
        </div>
    </div>

</div>

<div>
    <script>
        //this function for upload image
        function thisFileUpload() {
            document.getElementById("file").click()
        };

        //this function for Confirm Delete
        var path_to_delete;
        $(".deleteItem").click(function (e) {
            path_to_delete = $(this).data('path');
        });
        const confirmDelete = document.querySelector("#btnConfirmDelteFunction");

        function Delete(id) {
            confirmDelete.addEventListener('click', function () {
                $.ajax({
                    url: "/Genral/Post/DeletePost/" + id,
                    type: "POST",
                    contentType: "application/json;charset=UTF-8",
                    dataType: "json",
                    success: function () {
                        alert("Delete Post Don Succefuly !");
                        window.location.reload();
                    },
                    error: function (errormessage) {
                        alert("There are an Error Please fixed it ")
                    },
                });
            });

        };
        function LoadData() {
           
                $.ajax({
                    url: "/Genral/Post/Allposts" ,
                    type: "GET",
                    contentType: "application/json;charset=UTF-8",
                    dataType: "json",
                    success: function () {

                    },
                    error: function (errormessage) {
                        alert(errormessage.responseText)
                    },
                });
        };

        //$('#btnContinueDelete').click(function () {
        //    window.location = path_to_delete;
        //});

        //this function for Edit
        var path_to_edit;
        $(".editItem").click(function (e) {
            path_to_edit = $(this).data('path');
        });


    </script>
</div>

@*<script src="https://code.jquery.com/jquery-3.2.1.slim.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"></script>*@
